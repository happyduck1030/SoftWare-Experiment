# 🚀 人力资源管理系统 - 快速启动指南

## ✅ 前后端对接已 100% 完成！

---

## 📋 功能清单

### ✨ 已实现的功能

1. **用户登录** 
   - 真实 API 调用
   - 自动保存 token 和用户信息
   - 根据角色跳转

2. **员工自助功能**
   - 个人档案查看
   - 组织架构信息（三级机构 + 各级上级）
   - 个人薪酬记录查看

3. **机构负责人专属功能**
   - 下属员工管理
   - 更新下属基本信息
   - 查看下属薪酬汇总

4. **权限控制**
   - 根据 `isBoss` 字段动态显示菜单
   - 普通员工看不到"下属管理"
   - 后端 API 严格验证权限

---

## 🎯 立即开始

### Step 1: 启动后端服务

```bash
# 进入后端目录
cd backend

# 启动 MongoDB（如果还没启动）
# Windows: net start MongoDB
# Mac/Linux: sudo systemctl start mongod

# 启动后端服务
npm run dev
```

✅ 看到 `✅ MongoDB Connected` 和 `🚀 Server is running on port 5000` 表示成功

### Step 2: 启动前端服务

```bash
# 在项目根目录
npm run dev
```

✅ 前端运行在 `http://localhost:5173`

### Step 3: 测试登录

访问 `http://localhost:5173`，使用以下账号测试：

---

## 🔑 测试账号

### 1. 普通员工（张三）
```
用户名: zhangsan
密码: 123456
```
**测试内容：**
- ✅ 登录成功后跳转到员工页面
- ✅ 侧边栏显示 3 个菜单（个人档案、组织架构、薪酬记录）
- ✅ **看不到"下属管理"菜单**
- ✅ 可以查看个人档案
- ✅ 可以查看组织架构和上级信息
- ✅ 可以查看个人薪酬明细

### 2. 机构负责人（赵主管）
```
用户名: boss_zhao
密码: 123456
```
**测试内容：**
- ✅ 登录成功后跳转到员工页面
- ✅ 侧边栏显示 4 个菜单（多了"下属管理"）
- ✅ 个人信息区域显示"👑 负责人"标识
- ✅ 在组织架构页面能看到"机构负责人"标识
- ✅ **可以进入"下属管理"页面**
- ✅ 可以看到 3 个下属（李明、王芳、张三）
- ✅ 可以查看下属详情
- ✅ 可以编辑下属信息（电话、邮箱、状态）
- ✅ 可以查看下属薪酬汇总（只显示总额，不含明细）

### 3. 其他测试账号
```
# 普通员工
用户名: liming
密码: 123456

用户名: wangfang
密码: 123456

# 后端部门负责人
用户名: boss_liu
密码: 123456

# 管理员
用户名: admin
密码: admin123
```

---

## 🎬 测试演示流程

### 场景 1：普通员工体验
1. 使用 `zhangsan / 123456` 登录
2. 观察侧边栏：只有 3 个菜单项
3. 点击"个人档案"：看到完整的个人信息
4. 点击"组织架构"：看到三级机构和上级领导信息
5. 点击"薪酬记录"：看到自己的薪酬明细

### 场景 2：机构负责人体验
1. 退出登录
2. 使用 `boss_zhao / 123456` 登录
3. 观察侧边栏：有 4 个菜单项（多了"下属管理"）
4. 观察个人信息区域：显示"👑 负责人"标识
5. 点击"下属管理"：
   - 看到统计卡片（下属总数、在职人数等）
   - 看到 3 个下属的列表
   - 点击"查看"按钮：查看下属详情
   - 点击"编辑"按钮：修改下属的电话、邮箱、状态
   - 点击"薪酬"按钮：查看下属薪酬汇总（注意：只显示总额）

### 场景 3：验证权限控制
1. 使用 `zhangsan` 登录
2. 手动在浏览器地址栏输入 `/employee/subordinates`
3. 观察：应该看不到"下属管理"菜单
4. 如果直接访问该路由，后端应该返回 403 错误（如果前端做了路由守卫）

---

## 📊 功能对照表

| 功能 | 普通员工 | 机构负责人 | 说明 |
|------|---------|-----------|------|
| 个人档案 | ✅ | ✅ | 所有人都能查看自己的档案 |
| 组织架构 | ✅ | ✅ | 所有人都能查看机构和上级信息 |
| 薪酬记录 | ✅ | ✅ | 所有人都能查看自己的薪酬明细 |
| 下属管理 | ❌ | ✅ | 只有机构负责人能看到和访问 |
| 查看下属详情 | ❌ | ✅ | 只有机构负责人可以 |
| 编辑下属信息 | ❌ | ✅ | 只能改电话、邮箱、状态 |
| 查看下属薪酬 | ❌ | ✅ | 只显示总额，不显示明细 |

---

## 🎨 界面特点

### 1. 现代化设计
- ✅ 卡片设计，带阴影和圆角
- ✅ 渐变色背景
- ✅ Hover 动画效果
- ✅ 统一的紫色主题 (#59168b)

### 2. 用户体验
- ✅ 加载状态（Spin 组件）
- ✅ 错误提示（message 提示）
- ✅ 操作反馈（成功/失败提示）
- ✅ 空数据友好提示

### 3. 响应式布局
- ✅ 支持不同屏幕尺寸
- ✅ 网格布局自适应

---

## 🔍 关键实现

### 1. 动态菜单
根据登录返回的 `user.isBoss` 字段：
- `isBoss: true` → 显示"下属管理"菜单
- `isBoss: false` → 隐藏"下属管理"菜单

### 2. 机构层级展示
登录返回的机构信息：
```json
{
  "organizationPath": {
    "level1": "华宇集团总公司",
    "level2": "技术研发中心",
    "level3": "前端开发部"
  },
  "supervisors": {
    "level1Boss": {...},
    "level2Boss": {...},
    "level3Boss": {...}
  }
}
```

### 3. 权限验证
- **前端**：根据 `isBoss` 显示/隐藏菜单
- **后端**：API 严格验证，机构负责人只能访问本机构数据

---

## ⚠️ 常见问题

### Q1: 登录后没有数据？
**A:** 确保后端已运行 `npm run seed` 初始化测试数据

### Q2: 看不到"下属管理"菜单？
**A:** 检查登录账号，只有 `boss_zhao` 和 `boss_liu` 能看到

### Q3: API 请求失败？
**A:** 
1. 确认后端服务已启动（`http://localhost:5000`）
2. 确认 MongoDB 已运行
3. 检查浏览器控制台的错误信息

### Q4: Token 过期怎么办？
**A:** 系统会自动跳转到登录页，重新登录即可

---

## 📚 详细文档

- **后端 API 文档**: `backend/README.md`
- **后端安装指南**: `backend/INSTALL.md`
- **后端快速上手**: `backend/QUICK_START.md`
- **后端功能总结**: `BACKEND_SUMMARY.md`
- **前端对接完成**: `FRONTEND_INTEGRATION_COMPLETE.md`

---

## 🎉 完成度

- ✅ 后端 API：100% 完成
- ✅ 前端页面：100% 完成
- ✅ 前后端对接：100% 完成
- ✅ 权限控制：100% 完成
- ✅ UI 优化：100% 完成

**总体完成度：100%** 🎊

---

## 💡 下一步

1. ✅ **已完成** - 前后端完全对接
2. 📱 **可选** - 继续完善管理员功能
3. 🎨 **可选** - 添加更多交互动画
4. 🚀 **可选** - 部署到生产环境

---

## 🙋‍♂️ 需要帮助？

如果遇到问题：
1. 检查后端服务是否正常运行
2. 检查 MongoDB 是否启动
3. 查看浏览器控制台错误
4. 参考详细文档

**祝使用愉快！** 🎉



